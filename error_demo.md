# MySQL测试工具错误信息改进

## 问题描述
原来的错误信息对用户不够友好，当数据库连接失败时显示的是：
```
[mysql] 2025/06/09 11:34:12 packets.go:37: unexpected EOF
[mysql] 2025/06/09 11:34:12 packets.go:37: unexpected EOF
[mysql] 2025/06/09 11:34:12 packets.go:37: unexpected EOF
```

这种错误信息让用户"看完一脸懵逼"，无法有效帮助用户诊断和解决问题。

## 改进后的效果

### 1. 连接重试过程中的友好提示
```
第 1 次尝试连接数据库失败，还剩 2 次重试，错误：dial tcp 172.30.14.172:3307: connection refused
第 2 次尝试ping数据库失败，还剩 1 次重试，错误：dial tcp 172.30.14.172:3307: connection refused
第 3 次尝试ping数据库失败，还剩 0 次重试，错误：dial tcp 172.30.14.172:3307: connection refused
```

### 2. 最终失败时的详细诊断信息
```
数据库连接失败，请检查以下配置：
  - 主机地址: 172.30.14.172
  - 端口: 3307
  - 数据库名: test
  - 请确认数据库服务是否启动
  - 请确认网络连接是否正常
  - 请确认用户名和密码是否正确
  - 请确认防火墙设置是否阻止连接

总耗时: 1.5s，重试次数: 3
底层错误: dial tcp 172.30.14.172:3307: connection refused
```

### 3. 针对不同场景的错误提示

**数据库连接失败：**
```
无法连接到数据库 [172.30.14.172:3307]，请检查数据库配置。错误详情：...
```

**数据库初始化失败：**
```
数据库连接初始化失败 [172.30.14.172:3307]，可能是权限问题或数据库不存在。错误详情：...
```

**测试环境初始化失败：**
```
测试环境初始化失败，无法连接到数据库 [172.30.14.172:3307]。错误详情：...
```

**创建数据库失败：**
```
创建测试数据库失败 [数据库名: test_db]，可能是权限不足或数据库已存在。错误详情：...
```

**切换数据库失败：**
```
切换到数据库失败 [数据库名: test_db]，可能是数据库不存在或权限不足。错误详情：...
```

## 改进内容

1. **错误信息中文化** - 使用中文提示，符合用户习惯
2. **结构化的诊断信息** - 提供清晰的检查清单
3. **上下文相关的错误提示** - 根据不同场景提供针对性的错误信息
4. **包含关键配置信息** - 直接显示主机、端口、数据库名等配置
5. **提供可操作的建议** - 告诉用户应该检查什么

## 技术实现

修改了以下文件：
- `src/util.go` - 改进 `OpenDBWithRetry` 函数的错误处理
- `src/main.go` - 改进各种场景下的错误提示信息

这些改进让用户在遇到数据库连接问题时能够：
1. 快速了解问题的性质
2. 获得具体的配置信息
3. 知道应该检查哪些方面
4. 理解问题的严重程度和范围 